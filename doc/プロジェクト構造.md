# SpotLight プロジェクト構造

このドキュメントでは、SpotLightアプリのプロジェクト構造と各ディレクトリ・ファイルの役割について説明します。

## プロジェクト全体構造

```
spotlight/
├── android/                 # Android固有の設定
├── ios/                     # iOS固有の設定
├── lib/                     # メインのDartコード
├── test/                    # テストコード
├── doc/                     # ドキュメント
├── assets/                  # リソースファイル
│   ├── images/             # 画像ファイル
│   ├── icons/              # アイコンファイル
│   └── fonts/              # フォントファイル
├── pubspec.yaml            # 依存関係とメタデータ
├── README.md               # プロジェクト説明
└── .gitignore              # Git除外設定
```

## lib/ ディレクトリ詳細

### メインファイル
```
lib/
├── main.dart               # アプリのエントリーポイント
```

**main.dart の役割:**
- アプリの初期化
- テーマ設定
- プロバイダーの設定
- メイン画面の構築

### models/ ディレクトリ
```
lib/models/
├── post.dart              # 投稿データモデル
└── search_history.dart    # 検索履歴・候補データモデル
```

**post.dart:**
- PostType enum（動画、画像、テキスト、音声）
- Post クラス（投稿データ構造）
- サンプルデータ生成機能

**search_history.dart:**
- SearchHistory クラス（検索履歴）
- SearchSuggestion クラス（検索候補）
- サンプルデータ生成機能

### providers/ ディレクトリ
```
lib/providers/
└── navigation_provider.dart  # ナビゲーション状態管理
```

**navigation_provider.dart:**
- NavigationProvider クラス
- 現在のタブインデックス管理
- ChangeNotifier による状態通知

### screens/ ディレクトリ
```
lib/screens/
├── home_screen.dart           # ホーム画面（全画面投稿表示）
├── search_screen.dart         # 検索画面
├── create_post_screen.dart    # 投稿作成画面
├── notifications_screen.dart  # 通知画面
├── profile_screen.dart        # プロフィール画面
├── history_list_screen.dart   # 履歴一覧画面
├── playlist_list_screen.dart  # 再生リスト一覧画面
└── spotlight_list_screen.dart # スポットライト一覧画面
```

**home_screen.dart:**
- 全画面投稿表示
- 縦スクロールナビゲーション
- 右スワイプスポットライト
- アンビエントライティング
- コントロールボタン

**search_screen.dart:**
- YouTube風検索インターフェース
- 検索履歴管理
- リアルタイム検索候補
- おすすめ検索

**profile_screen.dart:**
- プロフィール表示
- スポットライト一覧
- 履歴・再生リスト表示
- バッジ表示

### widgets/ ディレクトリ
```
lib/widgets/
└── bottom_navigation_bar.dart  # カスタムボトムナビゲーションバー
```

**bottom_navigation_bar.dart:**
- CustomBottomNavigationBar クラス
- アイコンとラベルの表示
- 選択状態の視覚的表現
- タップイベント処理

### utils/ ディレクトリ
```
lib/utils/
└── spotlight_colors.dart      # カラーパレット管理
```

**spotlight_colors.dart:**
- SpotLightColors クラス
- 暖色系カラーパレット
- グラデーション生成
- カラー操作ユーティリティ

## assets/ ディレクトリ

### 画像リソース
```
assets/images/
├── profile/              # プロフィール画像
├── posts/               # 投稿画像
└── backgrounds/         # 背景画像
```

### アイコンリソース
```
assets/icons/
├── navigation/          # ナビゲーションアイコン
├── actions/            # アクションアイコン
└── badges/             # バッジアイコン
```

### フォントリソース
```
assets/fonts/
├── NotoSansJP/         # 日本語フォント
└── Roboto/             # 英数字フォント
```

## 設定ファイル

### pubspec.yaml
```yaml
name: spotlight
description: 隠れた才能を発見・共有するプラットフォーム

dependencies:
  flutter:
    sdk: flutter
  cupertino_icons: ^1.0.2
  provider: ^6.1.1
  go_router: ^12.1.1

dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^3.0.0

flutter:
  uses-material-design: true
  assets:
    - assets/images/
    - assets/icons/
  fonts:
    - family: NotoSansJP
      fonts:
        - asset: assets/fonts/NotoSansJP-Regular.ttf
```

## ディレクトリ命名規則

### 命名規則
- **ディレクトリ名**: snake_case
- **ファイル名**: snake_case
- **クラス名**: PascalCase
- **変数名**: camelCase

### ディレクトリの役割
- **models/**: データモデルのみ
- **providers/**: 状態管理クラスのみ
- **screens/**: 画面クラスのみ
- **widgets/**: 再利用可能なウィジェットのみ
- **utils/**: ユーティリティクラスのみ

## ファイル構成の原則

### 単一責任の原則
- 1ファイル = 1クラス（関連クラスは除く）
- 明確な責任分担
- 依存関係の最小化

### 依存関係の方向
```
screens/ → widgets/ → utils/
screens/ → providers/
screens/ → models/
providers/ → models/
```

### インポート順序
```dart
// 1. Dart標準ライブラリ
import 'dart:async';

// 2. Flutterライブラリ
import 'package:flutter/material.dart';

// 3. サードパーティライブラリ
import 'package:provider/provider.dart';

// 4. プロジェクト内のファイル
import '../models/post.dart';
import '../utils/spotlight_colors.dart';
```

## 拡張性の考慮

### 新機能追加時の構造
```
lib/
├── features/              # 機能別ディレクトリ（将来）
│   ├── auth/             # 認証機能
│   ├── posts/            # 投稿機能
│   └── social/           # ソーシャル機能
├── shared/               # 共通コンポーネント（将来）
│   ├── widgets/          # 共通ウィジェット
│   ├── services/         # 共通サービス
│   └── constants/        # 定数
```

### 国際化対応
```
lib/
├── l10n/                 # 国際化ファイル（将来）
│   ├── app_ja.arb        # 日本語
│   └── app_en.arb        # 英語
```

## パフォーマンス考慮

### ファイル分割の指針
- **大きなファイル**: 500行以上は分割を検討
- **関連機能**: 密接に関連する機能は同一ファイル
- **再利用性**: 複数箇所で使用されるものはwidgets/に

### メモリ効率
- **遅延読み込み**: 必要な時のみインポート
- **定数化**: 不変データはconstで定義
- **リソース管理**: 適切なdispose()の実装

## ドキュメント整備

### 必須ドキュメント
- **README.md**: プロジェクト概要
- **機能仕様書.md**: 機能詳細
- **開発ガイド.md**: 開発手順
- **プロジェクト構造.md**: このファイル

### コード内ドキュメント
- **クラス**: 目的と使用方法
- **メソッド**: パラメータと戻り値
- **複雑なロジック**: 処理の説明

## バージョン管理

### Git運用
- **main**: 本番環境
- **develop**: 開発環境
- **feature/**: 機能開発
- **hotfix/**: 緊急修正

### タグ管理
- **v1.0.0**: 初回リリース
- **v1.1.0**: 機能追加
- **v1.1.1**: バグ修正
