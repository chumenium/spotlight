# SpotLight 変数一覧

このドキュメントでは、SpotLightアプリで使用されている変数とその用途、詳細について説明します。

## メインアプリケーション (main.dart)

### SpotLightApp クラス
```dart
class SpotLightApp extends StatelessWidget {
  const SpotLightApp({super.key});
}
```
- **key**: Widgetの一意識別子
- **用途**: アプリのルートウィジェット

### MainScreen クラス
```dart
class MainScreen extends StatelessWidget {
  const MainScreen({super.key});
}
```
- **key**: Widgetの一意識別子
- **用途**: メイン画面のコンテナ

## ホーム画面 (home_screen.dart)

### _HomeScreenState クラス

#### ナビゲーション関連
```dart
final PageController _pageController = PageController();
int _currentIndex = 0;
```
- **_pageController**: 投稿間の縦スクロール制御
- **_currentIndex**: 現在表示中の投稿インデックス

#### 投稿データ
```dart
final List<Post> _posts = List.generate(10, (index) => Post.sample(index));
```
- **_posts**: 表示する投稿データのリスト（10件のサンプルデータ）

#### ジェスチャー・アニメーション関連
```dart
double _swipeOffset = 0.0;
bool _isSpotlighting = false;
AnimationController? _spotlightAnimationController;
AnimationController? _ambientAnimationController;
Animation<double>? _spotlightScaleAnimation;
Animation<double>? _ambientOpacityAnimation;
```
- **_swipeOffset**: 右スワイプの移動距離（0.0-200.0）
- **_isSpotlighting**: スポットライト効果の表示状態
- **_spotlightAnimationController**: スポットライトアイコンのアニメーション制御
- **_ambientAnimationController**: アンビエントライティングのアニメーション制御
- **_spotlightScaleAnimation**: スポットライトアイコンのスケールアニメーション
- **_ambientOpacityAnimation**: アンビエントライティングの透明度アニメーション

## 検索画面 (search_screen.dart)

### _SearchScreenState クラス

#### 検索入力関連
```dart
final TextEditingController _searchController = TextEditingController();
final FocusNode _searchFocusNode = FocusNode();
bool _isSearching = false;
```
- **_searchController**: 検索入力フィールドの制御
- **_searchFocusNode**: 検索フィールドのフォーカス制御
- **_isSearching**: 検索実行中の状態

#### 検索データ
```dart
final List<SearchHistory> _searchHistory = List.generate(8, (index) => SearchHistory.sample(index));
final List<SearchSuggestion> _allSuggestions = List.generate(10, (index) => SearchSuggestion.sample(index));
List<SearchSuggestion> _filteredSuggestions = [];
```
- **_searchHistory**: 検索履歴データ（8件のサンプル）
- **_allSuggestions**: 全検索候補データ（10件のサンプル）
- **_filteredSuggestions**: 入力文字に基づく絞り込み済み候補

## ナビゲーション (navigation_provider.dart)

### NavigationProvider クラス
```dart
int _currentIndex = 0;
```
- **_currentIndex**: 現在選択中のタブインデックス（0-4）
- **用途**: ボトムナビゲーションバーの選択状態管理

## データモデル

### Post クラス (post.dart)
```dart
final String id;                    // 投稿の一意識別子
final String userId;                // 投稿者のユーザーID
final String username;              // 投稿者のユーザー名
final String userAvatar;            // 投稿者のアバター画像URL
final String title;                 // 投稿タイトル
final String content;               // 投稿内容
final PostType type;                // 投稿タイプ（動画、画像、テキスト、音声）
final String? mediaUrl;             // メディアファイルURL（動画・音声）
final String? thumbnailUrl;         // サムネイル画像URL
final int likes;                    // いいね数
final int comments;                 // コメント数
final int shares;                   // シェア数
final bool isSpotlighted;           // スポットライト状態
final DateTime createdAt;           // 作成日時
```

### SearchHistory クラス (search_history.dart)
```dart
final String id;                    // 検索履歴の一意識別子
final String query;                 // 検索クエリ
final DateTime searchedAt;          // 検索実行日時
final String? resultCount;          // 検索結果件数
```

### SearchSuggestion クラス (search_history.dart)
```dart
final String id;                    // 検索候補の一意識別子
final String query;                 // 検索候補のクエリ
final String? description;          // 検索候補の説明
final bool isTrending;              // トレンド表示フラグ
```

## カラーユーティリティ (spotlight_colors.dart)

### SpotLightColors クラス
```dart
static const List<Color> warmColors = [
  Color(0xFFFF6B35), // Primary Orange
  Color(0xFFE63946), // Warm Red
  Color(0xFFF4A261), // Light Orange
  Color(0xFFE76F51), // Coral Red
  Color(0xFFF77F00), // Golden Yellow
  Color(0xFFD62828), // Deep Red
  Color(0xFFFCA311), // Amber Yellow
  Color(0xFFFB6F92), // Rose Pink
  Color(0xFFDA2C38), // Tomato Red
  Color(0xFFC1121C), // Dark Red
];
```
- **warmColors**: 暖色系カラーパレット（10色）

## ボトムナビゲーションバー (bottom_navigation_bar.dart)

### CustomBottomNavigationBar クラス
```dart
final int currentIndex;             // 現在選択中のタブインデックス
final Function(int) onTap;          // タブタップ時のコールバック関数
```

## 定数・設定値

### アプリケーション設定
```dart
// テーマ設定
scaffoldBackgroundColor: const Color(0xFF121212)  // メイン背景色
appBarTheme: const AppBarTheme(
  backgroundColor: Color(0xFF1E1E1E)              // アプリバー背景色
)

// アニメーション設定
duration: const Duration(milliseconds: 300)       // スポットライトアニメーション時間
duration: const Duration(milliseconds: 500)       // アンビエントライティング時間

// レイアウト設定
height: 60                                         // ナビゲーションバーの高さ
width: isCenter ? 80 : 70                         // ナビゲーションアイテムの幅
size: isCenter ? 28 : 24                          // アイコンサイズ
```

### データ制限値
```dart
// 検索履歴
_searchHistory.length > 20                        // 最大履歴保持数
_searchHistory.take(5)                            // 表示履歴数

// スワイプ制限
math.min(_swipeOffset + details.delta.dx, 200.0)  // 最大スワイプ距離
_swipeOffset > 50                                 // スポットライトアイコン表示閾値
_swipeOffset < 100                                // スワイプ完了閾値

// アニメーション
initialChildSize: 0.7                             // コメント画面初期サイズ
minChildSize: 0.5                                 // コメント画面最小サイズ
maxChildSize: 0.9                                 // コメント画面最大サイズ
```

## 状態管理変数

### 画面状態
```dart
bool _isSearching = false;         // 検索実行中フラグ
bool _isSpotlighting = false;      // スポットライト効果表示フラグ
```

### ユーザーインタラクション
```dart
double _swipeOffset = 0.0;         // スワイプ移動距離
int _currentIndex = 0;             // 現在の投稿インデックス
```

### アニメーション状態
```dart
AnimationController? _spotlightAnimationController;  // スポットライトアニメーション
AnimationController? _ambientAnimationController;    // アンビエントアニメーション
```

## データ生成・管理

### サンプルデータ生成
```dart
// 投稿データ
List.generate(10, (index) => Post.sample(index))

// 検索履歴
List.generate(8, (index) => SearchHistory.sample(index))

// 検索候補
List.generate(10, (index) => SearchSuggestion.sample(index))
```

### データフィルタリング
```dart
// 検索候補の絞り込み
_filteredSuggestions = _allSuggestions
    .where((suggestion) => 
        suggestion.query.toLowerCase().contains(query.toLowerCase()))
    .toList();
```

## メモリ管理

### リソース解放
```dart
@override
void dispose() {
  _pageController.dispose();                    // PageController解放
  _searchController.dispose();                  // TextEditingController解放
  _searchFocusNode.dispose();                   // FocusNode解放
  _spotlightAnimationController?.dispose();     // AnimationController解放
  _ambientAnimationController?.dispose();       // AnimationController解放
  super.dispose();
}
```

## パフォーマンス最適化

### 遅延初期化
```dart
late AnimationController _spotlightAnimationController;
late AnimationController _ambientAnimationController;
late Animation<double> _spotlightScaleAnimation;
late Animation<double> _ambientOpacityAnimation;
```

### Null Safety対応
```dart
AnimationController? _spotlightAnimationController;  // Nullable型
_spotlightAnimationController?.forward();            // 安全なアクセス
```

## イベント処理変数

### ジェスチャー検出
```dart
DragUpdateDetails details;        // ドラッグ更新詳細
DragEndDetails details;           // ドラッグ終了詳細
```

### コールバック関数
```dart
Function(int) onTap;              // タブタップコールバック
VoidCallback onTap;               // ボタンタップコールバック
```

## 時間・日時管理

### 時間計算
```dart
DateTime now = DateTime.now();                    // 現在時刻
DateTime difference = now.difference(dateTime);   // 時間差計算
```

### 時間表示
```dart
difference.inDays > 0                            // 日数表示
difference.inHours > 0                           // 時間表示
difference.inMinutes > 0                         // 分数表示
```

## レイアウト・サイズ変数

### 画面サイズ
```dart
MediaQuery.of(context).size.height               // 画面高さ
MediaQuery.of(context).size.width                // 画面幅
```

### ウィジェットサイズ
```dart
width: double.infinity                           // 全幅
height: double.infinity                          // 全高
radius: 20                                       // 角丸半径
padding: const EdgeInsets.all(16)                // パディング
```

## 色・スタイル変数

### カラー定数
```dart
const Color(0xFF121212)                          // メイン背景色
const Color(0xFF1E1E1E)                          // カード背景色
const Color(0xFFFF6B35)                          // プライマリカラー
Colors.white                                      // 白色
Colors.grey[400]                                 // グレー色
```

### テキストスタイル
```dart
fontSize: 24                                     // フォントサイズ
fontWeight: FontWeight.bold                      // フォント太さ
color: Colors.white                              // テキスト色
```

この変数一覧により、プロジェクト全体の変数とその用途を把握し、開発・保守作業を効率的に行うことができます。
