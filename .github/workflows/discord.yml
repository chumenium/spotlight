name: Discordé€šçŸ¥ï¼ˆpushæ¤œçŸ¥ï¼‰

on:
  push:
    branches:
      - main  # é€šçŸ¥ã—ãŸã„ãƒ–ãƒ©ãƒ³ãƒå

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Discordã¸é€šçŸ¥ã‚’é€ä¿¡
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        run: |
          # Discordã«é€ã‚‹JSONãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä½œæˆ
          curl -H "Content-Type: application/json" \
            -X POST \
            -d "{
              \"username\": \"GitHub é€šçŸ¥ãƒœãƒƒãƒˆ\",
              \"avatar_url\": \"https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png\",
              \"content\": \":rocket: **mainãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ãŒã‚ã‚Šã¾ã—ãŸï¼**\\nğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼å: **${{ github.event.head_commit.author.name }}**\\nğŸ“ ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: **${{ github.event.head_commit.message }}**\\nğŸ”— [ã‚³ãƒŸãƒƒãƒˆã‚’ç¢ºèªã™ã‚‹](https://github.com/${{ github.repository }}/commit/${{ github.sha }})\"
            }" \
            $DISCORD_WEBHOOK
